const baseData = {
  "columns": [
    {
      "isKey": false,
      "name": "CHA1_A",
      "obj": {
        "k": "",
        "p": "COL",
        "t": "CN"
      },
      "title": "Persona"
    },
    {
      "decimals": 0,
      "isKey": false,
      "name": "CHA1_S",
      "obj": {
        "k": "",
        "p": "",
        "t": "NR"
      },
      "title": "Anno Corrente"
    },
    {
      "decimals": 0,
      "isKey": false,
      "name": "CHA2_S",
      "obj": {
        "k": "",
        "p": "",
        "t": "NR"
      },
      "title": "Anno Corrente"
    },
    {
      "decimals": 0,
      "isKey": false,
      "name": "CHA3_S",
      "obj": {
        "k": "",
        "p": "",
        "t": "NR"
      },
      "title": "Anno Corrente"
    }
  ],
  "rows": [
    {
      "cells": {
        "CHA1_S": {
          "obj": {
            "k": "3",
            "p": "",
            "t": "NR"
          },
          "value": "3"
        },
        "CHA3_S": {
          "obj": {
            "k": "15",
            "p": "",
            "t": "NR"
          },
          "value": "15"
        },
        "CHA2_S": {
          "obj": {
            "k": "201",
            "p": "",
            "t": "NR"
          },
          "value": "201"
        },
        "CHA1_A": {
          "obj": {
            "k": "SANCOS",
            "p": "COL",
            "t": "CN"
          },
          "value": "SANCOS"
        }
      },
      "id": "0",
      "object": "",
      "readOnly": true
    },
    {
      "cells": {
        "CHA1_S": {
          "obj": {
            "k": "0",
            "p": "",
            "t": "NR"
          },
          "value": "0"
        },
        "CHA3_S": {
          "obj": {
            "k": "7",
            "p": "",
            "t": "NR"
          },
          "value": "7"
        },
        "CHA2_S": {
          "obj": {
            "k": "3",
            "p": "",
            "t": "NR"
          },
          "value": "3"
        },
        "CHA1_A": {
          "obj": {
            "k": "BENMAR",
            "p": "COL",
            "t": "CN"
          },
          "value": "BENMAR"
        }
      },
      "id": "1",
      "object": "",
      "readOnly": true
    },
    {
      "cells": {
        "CHA1_S": {
          "obj": {
            "k": "8",
            "p": "",
            "t": "NR"
          },
          "value": "8"
        },
        "CHA3_S": {
          "obj": {
            "k": "10",
            "p": "",
            "t": "NR"
          },
          "value": "10"
        },
        "CHA2_S": {
          "obj": {
            "k": "0",
            "p": "",
            "t": "NR"
          },
          "value": "0"
        },
        "CHA1_A": {
          "obj": {
            "k": "CARLUC",
            "p": "COL",
            "t": "CN"
          },
          "value": "CARLUC"
        }
      },
      "id": "2",
      "object": "",
      "readOnly": true
    },
    {
      "cells": {
        "CHA1_S": {
          "obj": {
            "k": "2",
            "p": "",
            "t": "NR"
          },
          "value": "2"
        },
        "CHA3_S": {
          "obj": {
            "k": "0",
            "p": "",
            "t": "NR"
          },
          "value": "0"
        },
        "CHA2_S": {
          "obj": {
            "k": "22",
            "p": "",
            "t": "NR"
          },
          "value": "22"
        },
        "CHA1_A": {
          "obj": {
            "k": "FIOGIA",
            "p": "COL",
            "t": "CN"
          },
          "value": "FIOGIA"
        }
      },
      "id": "3",
      "object": "",
      "readOnly": true
    },
    {
      "cells": {
        "CHA1_S": {
          "obj": {
            "k": "1",
            "p": "",
            "t": "NR"
          },
          "value": "1"
        },
        "CHA3_S": {
          "obj": {
            "k": "9",
            "p": "",
            "t": "NR"
          },
          "value": "9"
        },
        "CHA2_S": {
          "obj": {
            "k": "72",
            "p": "",
            "t": "NR"
          },
          "value": "72"
        },
        "CHA1_A": {
          "obj": {
            "k": "Franco",
            "p": "COL",
            "t": "CN"
          },
          "value": "Franco"
        }
      },
      "id": "4",
      "object": "",
      "readOnly": true
    },
    {
      "cells": {
        "CHA1_S": {
          "obj": {
            "k": "16",
            "p": "",
            "t": "NR"
          },
          "value": "16"
        },
        "CHA3_S": {
          "obj": {
            "k": "15",
            "p": "",
            "t": "NR"
          },
          "value": "15"
        },
        "CHA2_S": {
          "obj": {
            "k": "5",
            "p": "",
            "t": "NR"
          },
          "value": "5"
        },
        "CHA1_A": {
          "obj": {
            "k": "Carlo",
            "p": "COL",
            "t": "CN"
          },
          "value": "Carlo"
        }
      },
      "id": "5",
      "object": "",
      "readOnly": true
    },
    {
      "cells": {
        "CHA1_S": {
          "obj": {
            "k": "56",
            "p": "",
            "t": "NR"
          },
          "value": "56"
        },
        "CHA3_S": {
          "obj": {
            "k": "16",
            "p": "",
            "t": "NR"
          },
          "value": "16"
        },
        "CHA2_S": {
          "obj": {
            "k": "7",
            "p": "",
            "t": "NR"
          },
          "value": "7"
        },
        "CHA1_A": {
          "obj": {
            "k": "Oliviero",
            "p": "COL",
            "t": "CN"
          },
          "value": "Oliviero"
        }
      },
      "id": "6",
      "object": "",
      "readOnly": true
    },
    {
      "cells": {
        "CHA1_S": {
          "obj": {
            "k": "3",
            "p": "",
            "t": "NR"
          },
          "value": "3"
        },
        "CHA3_S": {
          "obj": {
            "k": "12",
            "p": "",
            "t": "NR"
          },
          "value": "12"
        },
        "CHA2_S": {
          "obj": {
            "k": "24",
            "p": "",
            "t": "NR"
          },
          "value": "24"
        },
        "CHA1_A": {
          "obj": {
            "k": "Quinto",
            "p": "COL",
            "t": "CN"
          },
          "value": "Quinto"
        }
      },
      "id": "7",
      "object": "",
      "readOnly": true
    }
  ],
  };

const baseConfig = {
    types: ['Hbar'],
    axis: 'CHA1_A',
    series: [{ code: 'CHA1_S' }, { code: 'CHA2_S' }],
};
const keys = Object.keys(baseConfig);
// HBAR
const hbar = document.getElementById('hbar');
hbar.data = baseData;
for (let k of keys) {
    hbar[k] = baseConfig[k];
}

// VBAR
const vbar = document.getElementById('vbar');
vbar.data = baseData;
for (let k of keys) {
    vbar[k] = baseConfig[k];
}
vbar.types = ['Vbar'];

document
    .getElementById('vbar-stacked')
    .addEventListener('change', ({ target }) => {
        vbar.stacked = target.checked;
    });

// PIE
const pie = document.getElementById('pie');
pie.data = baseData;
for (let k of keys) {
    pie[k] = baseConfig[k];
}
pie.types = ['Pie'];
pie.series = [{ code: 'CHA2_S' }];

document.getElementById('pie-aspect').addEventListener('change', (e) => {
    pie.asp = e.target.checked ? '3D' : '';
});
// Multiple series
const mults = document.getElementById('multseries');
mults.data = baseData;
for (let k of keys) {
    mults[k] = baseConfig[k];
}
mults.types = [
  "Vbar",
  "Line",
  "Line"
];
mults.series = [
  {
    "code": "CHA1_S",
    "decode": "Anno Corrente 1",
  },
  {
    "code": "CHA2_S",
    "decode": "Anno Corrente 2",
  },
  {
    "code": "CHA3_S",
    "decode": "Anno Corrente 3",
  }
];
mults.axis = 'CHA1_A';
mults.vAxes = [
  {
    "textPosition": "out",
  },
  {
    "textPosition": "out",
  },
  {
    "textPosition": "in",
  }
];
mults.hAxis = {"slantedText":true,"slantedTextAngle":25};
mults.sizeY = '300';

// custom colors
document.getElementById('colors').addEventListener('change', ({ target }) => {
    const charts = document.querySelectorAll('kup-chart');

    charts.forEach((chart) => {
        if (target.checked) {
            chart.colors = ['#ccc', '#333', '#666'];
        } else {
            chart.colors = [];
        }
    });
});

// custom size
document.getElementById('size').addEventListener('change', ({ target }) => {
    const charts = document.querySelectorAll('kup-chart');

    charts.forEach((chart) => {
        if (target.checked) {
            chart.sizeX = '400px';
            chart.sizeY = '400px';
        } else {
            chart.sizeX = '100%';
            chart.sizeY = '100%';
        }
    });
});

// enable / disable legend
document.getElementById('legend').addEventListener('change', ({ target }) => {
    const charts = document.querySelectorAll('kup-chart');

    charts.forEach((chart) => {
        chart.legend = target.checked ? 'right' : 'none';
    });
});

// title
document.getElementById('title').addEventListener('change', ({ target }) => {
    const charts = document.querySelectorAll('kup-chart');

    charts.forEach((chart) => {
        let cTitle = chart.chartTitle;
        if (cTitle == null) {
            cTitle = {};
        }
        cTitle.value = target.value;
        chart.chartTitle = { ...cTitle };
    });
});

// title color
document
    .getElementById('title-color')
    .addEventListener('change', ({ target }) => {
        const charts = document.querySelectorAll('kup-chart');

        charts.forEach((chart) => {
            let cTitle = chart.chartTitle;
            if (cTitle == null) {
                cTitle = {};
            }
            cTitle.color = target.value;
            chart.chartTitle = { ...cTitle };
        });
    });

// title size
document
    .getElementById('title-size')
    .addEventListener('change', ({ target }) => {
        console.log(target.value);

        if (!target.value) {
            return;
        }

        const charts = document.querySelectorAll('kup-chart');

        charts.forEach((chart) => {
            let cTitle = chart.chartTitle;
            if (cTitle == null) {
                cTitle = {};
            }
            cTitle.size = Number(target.value);
            chart.chartTitle = { ...cTitle };
        });
    });
